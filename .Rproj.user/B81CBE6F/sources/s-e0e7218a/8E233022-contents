{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# FUSION TWAS"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Follow instructions here: http://gusevlab.org/projects/fusion/"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "cd /home/simingz/causalTWAS"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "--2021-03-18 21:09:56--  https://github.com/gusevlab/fusion_twas/archive/master.zip\n",
      "Resolving github.com (github.com)... 140.82.114.3\n",
      "Connecting to github.com (github.com)|140.82.114.3|:443... connected.\n",
      "HTTP request sent, awaiting response... 302 Found\n",
      "Location: https://codeload.github.com/gusevlab/fusion_twas/zip/master [following]\n",
      "--2021-03-18 21:09:56--  https://codeload.github.com/gusevlab/fusion_twas/zip/master\n",
      "Resolving codeload.github.com (codeload.github.com)... 140.82.114.9\n",
      "Connecting to codeload.github.com (codeload.github.com)|140.82.114.9|:443... connected.\n",
      "HTTP request sent, awaiting response... 200 OK\n",
      "Length: unspecified [application/zip]\n",
      "Saving to: ‘master.zip’\n",
      "\n",
      "    [  <=>                                  ] 3,561,702   6.97MB/s   in 0.5s   \n",
      "\n",
      "2021-03-18 21:09:57 (6.97 MB/s) - ‘master.zip’ saved [3561702]\n",
      "\n",
      "Archive:  master.zip\n",
      "06288921f2e6825fac4c9403842a12129ae504f8\n",
      "   creating: fusion_twas-master/\n",
      "  inflating: fusion_twas-master/FUSION.assoc_test.R  \n",
      "  inflating: fusion_twas-master/FUSION.compute_weights.R  \n",
      "  inflating: fusion_twas-master/FUSION.post_process.R  \n",
      "  inflating: fusion_twas-master/LICENSE  \n",
      "  inflating: fusion_twas-master/README.md  \n",
      "   creating: fusion_twas-master/examples/\n",
      "  inflating: fusion_twas-master/examples/GEUV.compute_weights.sh  \n",
      "  inflating: fusion_twas-master/examples/GTEX_v7.sh  \n",
      "  inflating: fusion_twas-master/gcta_nr_robust  \n",
      "  inflating: fusion_twas-master/glist-hg19  \n",
      "   creating: fusion_twas-master/utils/\n",
      "  inflating: fusion_twas-master/utils/FUSION.profile_wgt.R  \n",
      "  inflating: fusion_twas-master/utils/make_score.R  \n"
     ]
    }
   ],
   "source": [
    "wget https://github.com/gusevlab/fusion_twas/archive/master.zip\n",
    "unzip master.zip\n",
    "cd fusion_twas-master"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "--2021-03-18 21:17:39--  https://github.com/gabraham/plink2R/archive/master.zip\n",
      "Resolving github.com (github.com)... 140.82.112.4\n",
      "Connecting to github.com (github.com)|140.82.112.4|:443... connected.\n",
      "HTTP request sent, awaiting response... 302 Found\n",
      "Location: https://codeload.github.com/gabraham/plink2R/zip/master [following]\n",
      "--2021-03-18 21:17:39--  https://codeload.github.com/gabraham/plink2R/zip/master\n",
      "Resolving codeload.github.com (codeload.github.com)... 140.82.114.9\n",
      "Connecting to codeload.github.com (codeload.github.com)|140.82.114.9|:443... connected.\n",
      "HTTP request sent, awaiting response... 200 OK\n",
      "Length: unspecified [application/zip]\n",
      "Saving to: ‘master.zip’\n",
      "\n",
      "    [  <=>                                  ] 2,789,569   9.15MB/s   in 0.3s   \n",
      "\n",
      "2021-03-18 21:17:40 (9.15 MB/s) - ‘master.zip’ saved [2789569]\n",
      "\n",
      "Archive:  master.zip\n",
      "d74be015e8f54d662b96c6c2a52a614746f9030d\n",
      "   creating: plink2R-master/\n",
      " extracting: plink2R-master/.gitignore  \n",
      "  inflating: plink2R-master/README.md  \n",
      "  inflating: plink2R-master/data.bed  \n",
      "  inflating: plink2R-master/data.bim  \n",
      "  inflating: plink2R-master/data.fam  \n",
      "  inflating: plink2R-master/plink2R.R  \n",
      "   creating: plink2R-master/plink2R/\n",
      "  inflating: plink2R-master/plink2R/DESCRIPTION  \n",
      " extracting: plink2R-master/plink2R/NAMESPACE  \n",
      "   creating: plink2R-master/plink2R/R/\n",
      "  inflating: plink2R-master/plink2R/R/plink2R.R  \n",
      "   creating: plink2R-master/plink2R/man/\n",
      "  inflating: plink2R-master/plink2R/man/plink2R-package.Rd  \n",
      "   creating: plink2R-master/plink2R/src/\n",
      "  inflating: plink2R-master/plink2R/src/Makevars  \n",
      "  inflating: plink2R-master/plink2R/src/Makevars.win  \n",
      "  inflating: plink2R-master/plink2R/src/data.cpp  \n",
      "  inflating: plink2R-master/plink2R/src/data.hpp  \n",
      "  inflating: plink2R-master/plink2R/src/plink2R.cpp  \n",
      "  inflating: plink2R-master/plink2R/src/plink2R.h  \n"
     ]
    }
   ],
   "source": [
    "wget https://github.com/gabraham/plink2R/archive/master.zip\n",
    "unzip master.zip"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# SMR HEIDI"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "cd /home/simingz/causalTWAS"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "--2021-04-13 15:12:35--  https://cnsgenomics.com/software/smr/download/smr_Linux.zip\n",
      "Resolving cnsgenomics.com (cnsgenomics.com)... 203.101.226.237\n",
      "Connecting to cnsgenomics.com (cnsgenomics.com)|203.101.226.237|:443... connected.\n",
      "HTTP request sent, awaiting response... 200 OK\n",
      "Length: 3081743 (2.9M) [application/zip]\n",
      "Saving to: ‘smr_Linux.zip’\n",
      "\n",
      "100%[======================================>] 3,081,743   2.58MB/s   in 1.1s   \n",
      "\n",
      "2021-04-13 15:12:37 (2.58 MB/s) - ‘smr_Linux.zip’ saved [3081743/3081743]\n",
      "\n"
     ]
    }
   ],
   "source": [
    "wget https://cnsgenomics.com/software/smr/download/smr_Linux.zip"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Archive:  smr_Linux.zip\n",
      "  inflating: smr_Linux               \n"
     ]
    }
   ],
   "source": [
    "unzip smr_Linux.zip"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [],
   "source": [
    "rm smr_Linux.zip"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# FOCUS"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "source activate twas\n",
    "pip install pyfocus --user"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "then need to add ```export PATH=`python -m site --user-base`/bin/:$PATH``` to `.bashrc`"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# MR-JTI"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "cd /project2/mstephens/causalTWAS/"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "annotation   fusion_twas-master  GTEx_v7_eQTL  predictdb    smr_Linux  WTCCC\n",
      "causal-TWAS  fusion_weights\t mr.ash        simulations  ukbiobank\n"
     ]
    }
   ],
   "source": [
    "ls"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Cloning into 'MR-JTI'...\n",
      "remote: Enumerating objects: 255, done.\u001b[K\n",
      "remote: Total 255 (delta 0), reused 0 (delta 0), pack-reused 255\u001b[K\n",
      "Receiving objects: 100% (255/255), 18.99 MiB | 31.98 MiB/s, done.\n",
      "Resolving deltas: 100% (117/117), done.\n"
     ]
    }
   ],
   "source": [
    "git clone git@github.com:gamazonlab/MR-JTI.git"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "annotation\t    fusion_weights  MR-JTI\t smr_Linux\n",
      "causal-TWAS\t    GTEx_v7_eQTL    predictdb\t ukbiobank\n",
      "fusion_twas-master  mr.ash\t    simulations  WTCCC\n"
     ]
    }
   ],
   "source": [
    "ls"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [],
   "source": [
    "cd MR-JTI"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [],
   "source": [
    "cd .."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "--2021-06-18 15:05:38--  https://cnsgenomics.com/software/gcta/bin/gcta_1.93.2beta.zip\n",
      "Resolving cnsgenomics.com (cnsgenomics.com)... 203.101.226.237\n",
      "Connecting to cnsgenomics.com (cnsgenomics.com)|203.101.226.237|:443... connected.\n",
      "HTTP request sent, awaiting response... 200 OK\n",
      "Length: 12054383 (11M) [application/zip]\n",
      "Saving to: ‘gcta_1.93.2beta.zip’\n",
      "\n",
      "100%[======================================>] 12,054,383  5.85MB/s   in 2.0s   \n",
      "\n",
      "2021-06-18 15:05:42 (5.85 MB/s) - ‘gcta_1.93.2beta.zip’ saved [12054383/12054383]\n",
      "\n"
     ]
    }
   ],
   "source": [
    "wget https://cnsgenomics.com/software/gcta/bin/gcta_1.93.2beta.zip"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "unzi"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Bash",
   "language": "bash",
   "name": "bash"
  },
  "language_info": {
   "codemirror_mode": "shell",
   "file_extension": ".sh",
   "mimetype": "text/x-sh",
   "name": "bash"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
